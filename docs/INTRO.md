# Introduction: GnuTomb MCP Service

Welcome to the GnuTomb MCP Service!

## What is this?

This project provides a backend service that offers secure, ephemeral storage spaces accessible via the **Model Context Protocol (MCP)**. It allows authorized MCP clients (like AI agents or backend applications) to temporarily store and retrieve files, with all data automatically encrypted and decrypted server-side using **GnuPG (GPG)**.

The service is **inspired by Tomb ("the crypto undertaker")** in its goal of providing easily managed, secure, contained storage, but it **implements this concept using file-level GPG encryption via an API**, rather than simulating or requiring Tomb's specific LUKS filesystem mounting commands.

Think of it as offering temporary, encrypted "digital lockboxes" for your MCP clients.

## Key Features

*   **API-Driven Storage:** All interaction via standard MCP tool calls.
*   **Server-Side GPG Encryption:** Transparently encrypts uploads and decrypts downloads using a dedicated service GPG key. Clients don't handle crypto keys for this service.
*   **Isolated Sessions:** Each initialized session (`storage_initialize`) provides a unique, separate storage directory on the server.
*   **Ephemeral:** Sessions expire based on Time-To-Live (TTL) tracking last access time. An external cleanup script (or optional internal task) is needed to permanently destroy expired session data. Sessions can also be manually destroyed (`storage_seal`).
*   **Resource Limits:** Configurable limits for individual file size and total session size help prevent abuse.
*   **Observability:** Exposes Prometheus metrics endpoint and uses structured JSON logging.
*   **Configuration:** Via environment variables / `.env` file using Pydantic.

## Use Cases

*   **Temporary Secure Scratchpad:** Agents needing to store intermediate sensitive results securely during a workflow.
*   **Secure File Exchange Prep:** Agents encrypting data before sending it elsewhere (using the service's key for internal storage). *Note: This service primarily encrypts TO its own key.*
*   **Handling Sensitive Inputs/Outputs:** Storing sensitive data fetched or generated by an agent temporarily before processing or deletion.

## Key Technologies

*   **Model Context Protocol (MCP):** The core API standard.
*   **Python:** Implementation language.
*   **FastMCP:** MCP server framework.
*   **GnuPG (GPG):** For server-side file encryption/decryption (via `python-gnupg`).
*   **Host Filesystem:** Stores encrypted session data and metadata files.
*   **Pydantic:** For configuration management.
*   **Prometheus (Optional):** For operational metrics.

## Getting Started

1.  **Review Documentation:** Start with `README.md` (setup) and `docs/USAGE.md` (API).
2.  **Technical Deep Dive:** Consult `docs/TECHNICAL.md` (architecture, config).
3.  **Setup:** Follow `README.md` or `install.sh` instructions (requires GPG setup on server).
4.  **Configure:** Create `.env` and set **`SERVICE_GPG_KEYID`** and paths.
5.  **Run:** Start the service.
6.  **Integrate:** Connect your MCP client.
